#!/bin/zsh

if [ -z "$GIT_REMOTE" ]; then
  GIT_REMOTE="github.com"
fi

if [ -z "$GIT_ROOT" ]; then
  GIT_ROOT="Git"
fi

GIT_DIR="$HOME/$GIT_ROOT"

# Get path relative to GIT_DIR
REL_PATH="${PWD#$GIT_DIR/}"

# Split the relative path into components
IFS='/' read -A PARTS <<< "$REL_PATH"
GIT_USER="${PARTS[1]}"
GIT_REPO="${PARTS[2]}"

# Handle worktree directories: strip -worktrees suffix
GIT_REPO="${GIT_REPO%-worktrees}"

GIT_URL="https://$GIT_REMOTE/$GIT_USER/$GIT_REPO/"

echo "open \"$GIT_URL\""
open "$GIT_URL"
